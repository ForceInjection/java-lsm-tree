ğŸ”¥ æ¨èä¸€ä¸ªé«˜è´¨é‡çš„Java LSM Treeå¼€æºé¡¹ç›®ï¼
[https://github.com/brianxiadong/java-lsm-tree](https://github.com/brianxiadong/java-lsm-tree)
**java-lsm-tree** æ˜¯ä¸€ä¸ªä»é›¶å®ç°çš„Log-Structured Merge Treeï¼Œä¸“ä¸ºé«˜å¹¶å‘å†™å…¥åœºæ™¯è®¾è®¡ã€‚
æ ¸å¿ƒäº®ç‚¹ï¼š
âš¡ æè‡´æ€§èƒ½ï¼šå†™å…¥é€Ÿåº¦è¶…è¿‡40ä¸‡ops/ç§’ï¼Œå®Œçˆ†ä¼ ç»ŸB+æ ‘
ğŸ—ï¸ å®Œæ•´æ¶æ„ï¼šMemTableè·³è¡¨ + SSTable + WAL + å¸ƒéš†è¿‡æ»¤å™¨ + å¤šçº§å‹ç¼©
ğŸ“š æ·±åº¦æ•™ç¨‹ï¼š12ç« è¯¦ç»†æ•™ç¨‹ï¼Œä»åŸºç¡€æ¦‚å¿µåˆ°ç”Ÿäº§ä¼˜åŒ–ï¼Œæ¯è¡Œä»£ç éƒ½æœ‰æ³¨é‡Š
ğŸ”’ å¹¶å‘å®‰å…¨ï¼šè¯»å†™é”æœºåˆ¶ï¼Œæ”¯æŒé«˜å¹¶å‘åœºæ™¯
ğŸ’¾ æ•°æ®å¯é ï¼šWALå†™å‰æ—¥å¿—ç¡®ä¿å´©æºƒæ¢å¤ï¼Œé›¶æ•°æ®ä¸¢å¤±
é€‚åˆè°ï¼Ÿ
- æƒ³æ·±å…¥ç†è§£LSM TreeåŸç†çš„å¼€å‘è€…
- éœ€è¦é«˜å†™å…¥æ€§èƒ½å­˜å‚¨å¼•æ“çš„é¡¹ç›®
- å‡†å¤‡æ•°æ®åº“/å­˜å‚¨ç³»ç»Ÿé¢è¯•çš„åŒå­¦
- å¯¹åˆ†å¸ƒå¼å­˜å‚¨æ„Ÿå…´è¶£çš„å·¥ç¨‹å¸ˆ
â­ ç»™ä¸ªStaræ”¯æŒå¼€æºï¼

# ç¬¬4ç« ï¼šSSTable ç£ç›˜å­˜å‚¨

## ä»€ä¹ˆæ˜¯SSTableï¼Ÿ

**SSTable (Sorted String Table)** æ˜¯LSM Treeä¸­å­˜å‚¨åœ¨ç£ç›˜ä¸Šçš„ä¸å¯å˜æœ‰åºæ–‡ä»¶ã€‚å½“MemTableè¾¾åˆ°å¤§å°é˜ˆå€¼æ—¶ï¼Œä¼šå°†å…¶å†…å®¹åˆ·ç›˜ç”ŸæˆSSTableæ–‡ä»¶ã€‚

## SSTable æ ¸å¿ƒç‰¹æ€§

### 1. ä¸å¯å˜æ€§ (Immutability)
- ä¸€æ—¦å†™å…¥å®Œæˆï¼ŒSSTableæ–‡ä»¶æ°¸ä¸ä¿®æ”¹
- æ›´æ–°æ“ä½œé€šè¿‡æ–°çš„SSTableä½“ç°
- åˆ é™¤æ“ä½œé€šè¿‡å¢“ç¢‘æ ‡è®°å®ç°

### 2. æœ‰åºæ€§ (Sorted)
- æ‰€æœ‰é”®å€¼å¯¹keyçš„å­—å…¸åºæ’åˆ—
- æ”¯æŒé«˜æ•ˆçš„äºŒåˆ†æŸ¥æ‰¾
- ä¾¿äºåˆå¹¶æ“ä½œ

### 3. è‡ªåŒ…å«æ€§ (Self-contained)
- åŒ…å«å¸ƒéš†è¿‡æ»¤å™¨ç”¨äºå¿«é€Ÿè¿‡æ»¤
- åŒ…å«ç´¢å¼•ä¿¡æ¯åŠ é€ŸæŸ¥æ‰¾
- åŒ…å«å…ƒæ•°æ®ä¿¡æ¯

> å…³äºå¸ƒéš†è¿‡æ»¤å™¨ï¼Œå¤§å®¶å…ˆç®€å•è®¤ä¸ºç”¨æ¥åˆ¤æ–­æ•°æ®å­˜åœ¨ä¸å­˜åœ¨å³å¯ï¼Œä¸‹ä¸€å°èŠ‚ä¼šè¯¦ç»†è¿›è¡Œè®²è§£ã€‚

## æ–‡ä»¶æ ¼å¼è®¾è®¡

æˆ‘ä»¬çš„SSTableé‡‡ç”¨ç®€åŒ–çš„æ–‡ä»¶æ ¼å¼ï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    SSTable æ–‡ä»¶ç»“æ„                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [æ¡ç›®æ•°é‡: 4å­—èŠ‚]                                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [æ•°æ®æ¡ç›®åŒºåŸŸ]                                             â”‚
â”‚    æ¡ç›®1: key|value|timestamp|deleted                       â”‚
â”‚    æ¡ç›®2: key|value|timestamp|deleted                       â”‚
â”‚    ...                                                      â”‚
â”‚    æ¡ç›®N: key|value|timestamp|deleted                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [å¸ƒéš†è¿‡æ»¤å™¨åŒºåŸŸ]                                           â”‚
â”‚    è¿‡æ»¤å™¨æ•°æ®                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## SSTable å®ç°è§£æ

è®©æˆ‘ä»¬æ·±å…¥åˆ†æSSTableçš„å®ç°ï¼š

```java
package com.brianxiadong.lsmtree;

import java.io.*;
import java.nio.file.Files;
import java.nio.file.Paths;
import java.util.*;

/**
 * Sorted String Table (SSTable) å®ç°
 * ç£ç›˜ä¸Šçš„æœ‰åºä¸å¯å˜æ–‡ä»¶
 */
public class SSTable {
    // æ–‡ä»¶è·¯å¾„ï¼šSSTableå­˜å‚¨åœ¨ç£ç›˜ä¸Šçš„ä½ç½®
    private final String filePath;
    // å¸ƒéš†è¿‡æ»¤å™¨ï¼šç”¨äºå¿«é€Ÿåˆ¤æ–­é”®æ˜¯å¦å¯èƒ½å­˜åœ¨
    private final BloomFilter bloomFilter;
    // åˆ›å»ºæ—¶é—´ï¼šç”¨äºå‹ç¼©æ—¶çš„æ–‡ä»¶æ’åº
    private final long creationTime;
    
    // æ„é€ å‡½æ•°ï¼šä»æœ‰åºæ•°æ®åˆ›å»ºSSTable
    public SSTable(String filePath, List<KeyValue> sortedData) throws IOException {
        this.filePath = filePath;                           // è®¾ç½®æ–‡ä»¶è·¯å¾„
        this.creationTime = System.currentTimeMillis();    // è®°å½•åˆ›å»ºæ—¶é—´
        // åˆ›å»ºå¸ƒéš†è¿‡æ»¤å™¨ï¼Œä¼°ç®—æ¡ç›®æ•°å’Œå‡é˜³æ€§ç‡
        this.bloomFilter = new BloomFilter(sortedData.size(), 0.01);
        
        // å°†æ•°æ®æŒä¹…åŒ–åˆ°ç£ç›˜æ–‡ä»¶
        writeToFile(sortedData);
    }
    
    /**
     * ä»æ–‡ä»¶è·¯å¾„åŠ è½½å·²å­˜åœ¨çš„SSTable
     */
    public SSTable(String filePath) throws IOException {
        this.filePath = filePath;                                           // è®¾ç½®æ–‡ä»¶è·¯å¾„
        this.creationTime = Files.getLastModifiedTime(Paths.get(filePath)) // è·å–æ–‡ä»¶ä¿®æ”¹æ—¶é—´ä½œä¸ºåˆ›å»ºæ—¶é—´
                .toMillis();
        this.bloomFilter = new BloomFilter(1000, 0.01);                    // åˆ›å»ºä¸´æ—¶å¸ƒéš†è¿‡æ»¤å™¨
        
        // é‡æ–°æ„å»ºå¸ƒéš†è¿‡æ»¤å™¨
        rebuildBloomFilter();
    }
}
```

**ä»£ç è§£é‡Š**: è¿™ä¸ªSSTableç±»æ˜¯LSM TreeæŒä¹…åŒ–å­˜å‚¨çš„æ ¸å¿ƒã€‚å®ƒåŒ…å«ä¸‰ä¸ªå…³é”®ç»„ä»¶ï¼šæ–‡ä»¶è·¯å¾„ç”¨äºç£ç›˜å­˜å‚¨ï¼Œå¸ƒéš†è¿‡æ»¤å™¨ç”¨äºå¿«é€Ÿè¿‡æ»¤ä¸å­˜åœ¨çš„é”®ï¼Œæœ‰åºæ•°æ®åˆ—è¡¨ç”¨äºå†…å­˜ä¸­çš„å¿«é€Ÿè®¿é—®ã€‚æ„é€ å‡½æ•°ä¼šè‡ªåŠ¨åˆ›å»ºå¸ƒéš†è¿‡æ»¤å™¨å¹¶å°†æ•°æ®å†™å…¥ç£ç›˜ã€‚

### æ ¸å¿ƒæ–¹æ³•åˆ†æ

#### 1. å†™å…¥æ–‡ä»¶ (writeToFile)

```java
/**
 * å°†æ’åºæ•°æ®å†™å…¥æ–‡ä»¶
 */
private void writeToFile(List<KeyValue> sortedData) throws IOException {
    // ä½¿ç”¨DataOutputStreamè¿›è¡ŒäºŒè¿›åˆ¶å†™å…¥ï¼Œæ€§èƒ½æ›´å¥½
    try (DataOutputStream dos = new DataOutputStream(
            new BufferedOutputStream(new FileOutputStream(filePath)))) {

        // å†™å…¥æ¡ç›®æ•°é‡
        dos.writeInt(sortedData.size());                    // å†™å…¥æ•´æ•°ç±»å‹çš„æ¡ç›®æ•°

        // å†™å…¥æ‰€æœ‰æ•°æ®æ¡ç›®
        for (KeyValue kv : sortedData) {
            // æ·»åŠ åˆ°å¸ƒéš†è¿‡æ»¤å™¨
            bloomFilter.add(kv.getKey());                   // æ·»åŠ é”®åˆ°è¿‡æ»¤å™¨

            // å†™å…¥æ•°æ®ï¼škey, deleted, value(å¦‚æœä¸æ˜¯åˆ é™¤), timestamp
            dos.writeUTF(kv.getKey());                      // å†™å…¥é”®ï¼ˆUTF-8ç¼–ç ï¼‰
            dos.writeBoolean(kv.isDeleted());               // å†™å…¥åˆ é™¤æ ‡è®°
            if (!kv.isDeleted()) {                          // å¦‚æœä¸æ˜¯åˆ é™¤æ“ä½œ
                dos.writeUTF(kv.getValue());                // å†™å…¥å€¼
            }
            dos.writeLong(kv.getTimestamp());               // å†™å…¥æ—¶é—´æˆ³
        }
    }
    // try-with-resourcesè‡ªåŠ¨å…³é—­DataOutputStream
}
```

**ä»£ç è§£é‡Š**: å†™å…¥è¿‡ç¨‹é‡‡ç”¨é¡ºåºå†™å…¥ç­–ç•¥ï¼Œè¿™æ˜¯ç£ç›˜I/Oçš„æœ€ä¼˜æ¨¡å¼ã€‚æ–‡ä»¶æ ¼å¼ç®€å•æ˜äº†ï¼šé¦–å…ˆæ˜¯æ¡ç›®æ•°é‡ï¼Œç„¶åæ˜¯æ‰€æœ‰æ•°æ®æ¡ç›®ï¼Œæœ€åæ˜¯å¸ƒéš†è¿‡æ»¤å™¨ã€‚ä½¿ç”¨ç®¡é“ç¬¦ï¼ˆ|ï¼‰åˆ†éš”å­—æ®µï¼Œä¾¿äºè§£æã€‚BufferedWriteræä¾›ç¼“å†²ä»¥æé«˜å†™å…¥æ€§èƒ½ã€‚

**å†™å…¥è¿‡ç¨‹åˆ†æ**:
1. **é¡ºåºå†™å…¥**: å……åˆ†åˆ©ç”¨ç£ç›˜é¡ºåºå†™å…¥çš„é«˜æ€§èƒ½
2. **æ–‡æœ¬æ ¼å¼**: ä¾¿äºè°ƒè¯•å’Œäººå·¥æ£€æŸ¥
3. **å®Œæ•´æ€§**: åŒ…å«æ‰€æœ‰å¿…è¦çš„å…ƒæ•°æ®

#### 2. é‡å»ºå¸ƒéš†è¿‡æ»¤å™¨ (rebuildBloomFilter)

```java
/**
 * é‡æ–°æ„å»ºå¸ƒéš†è¿‡æ»¤å™¨
 */
private void rebuildBloomFilter() throws IOException {
    // ä½¿ç”¨DataInputStreamè¯»å–äºŒè¿›åˆ¶æ–‡ä»¶
    try (DataInputStream dis = new DataInputStream(
            new BufferedInputStream(new FileInputStream(filePath)))) {

        int totalEntries = dis.readInt();                   // è¯»å–æ¡ç›®æ€»æ•°

        // éå†æ‰€æœ‰æ¡ç›®ï¼Œå°†é”®æ·»åŠ åˆ°å¸ƒéš†è¿‡æ»¤å™¨
        for (int i = 0; i < totalEntries; i++) {
            String key = dis.readUTF();                     // è¯»å–é”®
            boolean deleted = dis.readBoolean();            // è¯»å–åˆ é™¤æ ‡è®°
            if (!deleted) {                                 // å¦‚æœä¸æ˜¯åˆ é™¤æ“ä½œ
                dis.readUTF();                              // è·³è¿‡valueï¼Œåªè¯»å–é”®ç”¨äºå¸ƒéš†è¿‡æ»¤å™¨
            }
            dis.readLong();                                 // è·³è¿‡timestamp

            // æ·»åŠ åˆ°å¸ƒéš†è¿‡æ»¤å™¨
            bloomFilter.add(key);                           // å°†é”®æ·»åŠ åˆ°è¿‡æ»¤å™¨
        }
    }
    // try-with-resourcesè‡ªåŠ¨å…³é—­DataInputStream
}
```

**ä»£ç è§£é‡Š**: åŠ è½½è¿‡ç¨‹æ˜¯å†™å…¥çš„é€†å‘æ“ä½œã€‚å…ˆè¯»å–æ¡ç›®æ•°é‡ä»¥ä¾¿é¢„ä¼°å†…å­˜éœ€æ±‚ï¼Œç„¶åé€è¡Œè§£ææ•°æ®æ¡ç›®ï¼Œæœ€åæ¢å¤å¸ƒéš†è¿‡æ»¤å™¨ã€‚å¦‚æœå¸ƒéš†è¿‡æ»¤å™¨æ•°æ®æŸåï¼Œä¼šè‡ªåŠ¨é‡å»ºï¼Œå¢å¼ºäº†ç³»ç»Ÿçš„å®¹é”™æ€§ã€‚è§£æä½¿ç”¨splitæ–¹æ³•æŒ‰ç®¡é“ç¬¦åˆ†å‰²å­—æ®µã€‚

#### 3. æŸ¥è¯¢æ“ä½œ (get)

```java
/**
 * æŸ¥è¯¢é”®å€¼ - ç®€åŒ–å®ç°ï¼Œé¡ºåºæœç´¢
 */
public String get(String key) {
    // é¦–å…ˆæ£€æŸ¥å¸ƒéš†è¿‡æ»¤å™¨
    if (!bloomFilter.mightContain(key)) {
        return null;                                        // å¸ƒéš†è¿‡æ»¤å™¨è¯´ä¸å­˜åœ¨ï¼Œç›´æ¥è¿”å›null
    }

    // å¸ƒéš†è¿‡æ»¤å™¨è¯´å¯èƒ½å­˜åœ¨ï¼Œè¯»å–æ–‡ä»¶è¿›è¡ŒæŸ¥æ‰¾
    try (DataInputStream dis = new DataInputStream(
            new BufferedInputStream(new FileInputStream(filePath)))) {

        int totalEntries = dis.readInt();                   // è¯»å–æ¡ç›®æ€»æ•°

        // é¡ºåºæœç´¢æ‰€æœ‰æ¡ç›®
        for (int i = 0; i < totalEntries; i++) {
            String currentKey = dis.readUTF();              // è¯»å–å½“å‰é”®
            boolean deleted = dis.readBoolean();            // è¯»å–åˆ é™¤æ ‡è®°
            String value = null;                            // åˆå§‹åŒ–å€¼
            if (!deleted) {                                 // å¦‚æœä¸æ˜¯åˆ é™¤æ“ä½œ
                value = dis.readUTF();                      // è¯»å–å€¼
            }
            long timestamp = dis.readLong();                // è¯»å–æ—¶é—´æˆ³

            // æ£€æŸ¥æ˜¯å¦æ‰¾åˆ°ç›®æ ‡é”®
            if (currentKey.equals(key)) {
                return deleted ? null : value;              // å¦‚æœæ˜¯åˆ é™¤æ ‡è®°è¿”å›nullï¼Œå¦åˆ™è¿”å›å€¼
            }

            // ç”±äºæ•°æ®æœ‰åºï¼Œå¦‚æœå½“å‰é”®å¤§äºç›®æ ‡é”®ï¼Œåˆ™ä¸å­˜åœ¨
            if (currentKey.compareTo(key) > 0) {
                break;                                      // æå‰é€€å‡ºå¾ªç¯
            }
        }
    } catch (IOException e) {
        e.printStackTrace();                                // æ‰“å°å¼‚å¸¸ä¿¡æ¯
    }

    return null;                                            // æœªæ‰¾åˆ°ï¼Œè¿”å›null
}
```

**ä»£ç è§£é‡Š**: æŸ¥è¯¢æ“ä½œé‡‡ç”¨ä¸¤é˜¶æ®µç­–ç•¥ï¼šé¦–å…ˆç”¨å¸ƒéš†è¿‡æ»¤å™¨å¿«é€Ÿè¿‡æ»¤ä¸å­˜åœ¨çš„é”®ï¼Œè¿™èƒ½é¿å…å¤§éƒ¨åˆ†æ— æ•ˆçš„ç£ç›˜è®¿é—®ã€‚å¦‚æœå¸ƒéš†è¿‡æ»¤å™¨è¡¨ç¤ºé”®å¯èƒ½å­˜åœ¨ï¼Œå†è¿›è¡Œæ–‡ä»¶æ‰«æã€‚ç”±äºæ•°æ®æœ‰åºå­˜å‚¨ï¼Œå½“é‡åˆ°æ¯”ç›®æ ‡é”®å¤§çš„é”®æ—¶å¯ä»¥æå‰é€€å‡ºã€‚è¿™ç§å®ç°è™½ç„¶æ˜¯é¡ºåºæŸ¥æ‰¾ï¼Œä½†åœ¨å®é™…åº”ç”¨ä¸­ç”±äºå¸ƒéš†è¿‡æ»¤å™¨çš„è¿‡æ»¤æ•ˆæœï¼Œå¤§å¤šæ•°æŸ¥è¯¢éƒ½ä¸éœ€è¦è®¿é—®ç£ç›˜ã€‚

#### 4. è·å–æ‰€æœ‰æ¡ç›® (getAllEntries)

```java
/**
 * è·å–æ‰€æœ‰é”®å€¼å¯¹ï¼ˆç”¨äºåˆå¹¶ï¼‰
 */
public List<KeyValue> getAllEntries() throws IOException {
    List<KeyValue> entries = new ArrayList<>();            // åˆ›å»ºç»“æœåˆ—è¡¨

    // è¯»å–æ–‡ä»¶ä¸­çš„æ‰€æœ‰æ•°æ®
    try (DataInputStream dis = new DataInputStream(
            new BufferedInputStream(new FileInputStream(filePath)))) {

        int totalEntries = dis.readInt();                   // è¯»å–æ¡ç›®æ€»æ•°

        // è¯»å–æ‰€æœ‰æ¡ç›®
        for (int i = 0; i < totalEntries; i++) {
            String key = dis.readUTF();                     // è¯»å–é”®
            boolean deleted = dis.readBoolean();            // è¯»å–åˆ é™¤æ ‡è®°
            String value = null;                            // åˆå§‹åŒ–å€¼
            if (!deleted) {                                 // å¦‚æœä¸æ˜¯åˆ é™¤æ“ä½œ
                value = dis.readUTF();                      // è¯»å–å€¼
            }
            long timestamp = dis.readLong();                // è¯»å–æ—¶é—´æˆ³

            // åˆ›å»ºKeyValueå¯¹è±¡å¹¶æ·»åŠ åˆ°åˆ—è¡¨
            entries.add(new KeyValue(key, value, timestamp, deleted));
        }
    }

    return entries;                                         // è¿”å›æ‰€æœ‰æ¡ç›®
}

/**
 * åˆ é™¤SSTableæ–‡ä»¶
 */
public void delete() throws IOException {
    Files.deleteIfExists(Paths.get(filePath));              // åˆ é™¤æ–‡ä»¶ï¼Œå¦‚æœå­˜åœ¨çš„è¯
}

// Getteræ–¹æ³•
public String getFilePath() {
    return filePath;                                        // è¿”å›æ–‡ä»¶è·¯å¾„
}

public long getCreationTime() {
    return creationTime;                                    // è¿”å›åˆ›å»ºæ—¶é—´
}
```

**ä»£ç è§£é‡Š**: `getAllEntries`æ–¹æ³•ç”¨äºå‹ç¼©è¿‡ç¨‹ä¸­è¯»å–SSTableçš„æ‰€æœ‰æ•°æ®ã€‚å®ƒæŒ‰é¡ºåºè¯»å–æ–‡ä»¶ä¸­çš„æ‰€æœ‰æ¡ç›®ï¼Œé‡å»ºKeyValueå¯¹è±¡ã€‚`delete`æ–¹æ³•æä¾›æ–‡ä»¶æ¸…ç†åŠŸèƒ½ï¼Œåœ¨å‹ç¼©å®Œæˆååˆ é™¤æ—§çš„SSTableæ–‡ä»¶ã€‚Getteræ–¹æ³•æä¾›å¯¹æ–‡ä»¶è·¯å¾„å’Œåˆ›å»ºæ—¶é—´çš„è®¿é—®ï¼Œç”¨äºå‹ç¼©ç­–ç•¥ä¸­çš„æ–‡ä»¶æ’åºã€‚


## å°ç»“

SSTableæ˜¯LSM Treeçš„æŒä¹…åŒ–å­˜å‚¨å±‚ï¼Œå…·æœ‰ä»¥ä¸‹å…³é”®ç‰¹æ€§ï¼š

1. **ä¸å¯å˜æ€§**: ç¡®ä¿æ•°æ®ä¸€è‡´æ€§å’Œçº¿ç¨‹å®‰å…¨
2. **æœ‰åºæ€§**: æ”¯æŒé«˜æ•ˆæŸ¥æ‰¾å’ŒèŒƒå›´æŸ¥è¯¢
3. **è‡ªåŒ…å«**: åŒ…å«å¸ƒéš†è¿‡æ»¤å™¨å’Œç´¢å¼•ä¿¡æ¯
4. **ä¼˜åŒ–**: å¤šç§æ€§èƒ½ä¼˜åŒ–æŠ€æœ¯

---

## æ€è€ƒé¢˜

1. ä¸ºä»€ä¹ˆSSTableè¦è®¾è®¡ä¸ºä¸å¯å˜çš„ï¼Ÿ
2. å¸ƒéš†è¿‡æ»¤å™¨å¦‚ä½•æå‡SSTableçš„æŸ¥è¯¢æ€§èƒ½ï¼Ÿ
3. å¦‚ä½•åœ¨ä¿æŒæ€§èƒ½çš„åŒæ—¶å‡å°‘SSTableçš„ç£ç›˜å ç”¨ï¼Ÿ
